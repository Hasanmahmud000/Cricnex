<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>এডমিন প্যানেল</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
    input, textarea { display: block; margin: 10px 0; width: 100%; padding: 5px; }
    button { padding: 10px; }
    .matchList { margin-top: 20px; }
    .matchItem { border: 1px solid #ccc; padding: 10px; margin: 5px 0; background: #fff; }
  </style>
</head>
<body>
  <h2>⚙️ Admin Panel</h2>

  <input id="title" placeholder="Match Title">
  <input id="team1" placeholder="Team 1">
  <input id="team2" placeholder="Team 2">
  <input id="logo1" placeholder="Logo 1 URL">
  <input id="logo2" placeholder="Logo 2 URL">
  <input id="time" placeholder="Match Time (e.g. 2025-05-23T18:00:00)">
  <textarea id="links" placeholder='Links JSON [{"name":"Link 1","url":"https://..."},...]'></textarea>
  <button onclick="addMatch()">ম্যাচ যোগ করুন</button>

  <h3>ম্যাচ লিস্ট:</h3>
  <div id="matchList">লোড হচ্ছে...</div>

  <script>
    const API = "https://script.google.com/macros/s/AKfycbxtBCwpzWkODkQiDYPySJt07TQkjDhQ3fz4SFquq635Nvp_LUkSixpGxMJyP5UFDgfYKg/exec";

    async function addMatch() {
      const q = new URLSearchParams({
        title: document.getElementById('title').value,
        team1: document.getElementById('team1').value,
        team2: document.getElementById('team2').value,
        logo1: document.getElementById('logo1').value,
        logo2: document.getElementById('logo2').value,
        time: document.getElementById('time').value,
        linksJson: document.getElementById('links').value,
      });
      await fetch(API + "?action=addMatch&" + q.toString());
      alert("ম্যাচ যোগ হয়েছে!");
      location.reload();
    }

    async function deleteMatch(title) {
      await fetch(API + "?action=deleteMatch&title=" + encodeURIComponent(title));
      alert("ম্যাচ ডিলিট হয়েছে!");
      location.reload();
    }

    async function loadMatches() {
      const res = await fetch(API);
      const data = await res.json();
      document.getElementById("matchList").innerHTML = data.map(m =>
        `<div class="matchItem"><b>${m["Match Title"]}</b>
         <button onclick="deleteMatch('${m["Match Title"]}')">❌</button></div>`
      ).join('');
    }

    loadMatches();
  </script>
</body>
</html>
