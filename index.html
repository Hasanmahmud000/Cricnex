<!DOCTYPE html>
<html>
<head>
  <title>Live Match</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { text-align: center; font-family: sans-serif; padding: 10px; }
    .team-logo { width: 80px; height: 80px; object-fit: contain; }
    #liveTag { color: red; font-size: 30px; font-weight: bold; animation: bounce 1s infinite; display: none; }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    #countdown { font-size: 22px; margin: 20px; }
    .video-container { margin: 20px 0; }
    iframe, video { width: 100%; height: 400px; margin-top: 10px; display: none; }
  </style>
</head>
<body>
  <h1 id="title"></h1>

  <div>
    <img id="logo1" class="team-logo" />
    <span id="team1"></span>
    <span> VS </span>
    <span id="team2"></span>
    <img id="logo2" class="team-logo" />
  </div>

  <div id="countdown"></div>
  <div id="liveTag">LIVE NOW</div>
  <div id="videoArea" class="video-container"></div>

  <script>
    const url = "https://script.google.com/macros/s/AKfycbwFADGzs2_ArmVzY-z2-tu9IpTL1xu2Xje5-_ZCLRsXG19SllxFrDuc1aE0mRMsBMgiVA/exec?action=getData";

    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById("title").innerText = data.title;
        document.getElementById("team1").innerText = data.team1;
        document.getElementById("team2").innerText = data.team2;
        document.getElementById("logo1").src = data.logo1;
        document.getElementById("logo2").src = data.logo2;

        const matchTime = new Date(data.matchTime).getTime();
        const countdownEl = document.getElementById("countdown");
        const liveTag = document.getElementById("liveTag");
        const videoArea = document.getElementById("videoArea");

        const interval = setInterval(() => {
          const now = new Date().getTime();
          const distance = matchTime - now;

          if (distance <= 0) {
            clearInterval(interval);
            countdownEl.innerText = "";
            liveTag.style.display = "block";
            data.links.forEach((link, index) => {
              const label = document.createElement("div");
              label.innerText = `Server ${index + 1}`;
              videoArea.appendChild(label);

              if (link.includes(".m3u8") || link.includes(".mpd")) {
                const video = document.createElement("video");
                video.controls = true;
                video.autoplay = true;
                video.src = link;
                video.style.display = "block";
                videoArea.appendChild(video);
              } else {
                const iframe = document.createElement("iframe");
                iframe.src = link;
                iframe.style.display = "block";
                videoArea.appendChild(iframe);
              }
            });
          } else {
            const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((distance % (1000 * 60)) / 1000);
            countdownEl.innerText = `Starts in: ${h}h ${m}m ${s}s`;
          }
        }, 1000);
      });
  </script>
</body>
</html>
