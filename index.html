<!DOCTYPE html>
<html>
<head>
  <title>CricNex - Live</title>
  <style>
    body { text-align: center; font-family: sans-serif; }
    img { width: 150px; height: auto; }
    #liveVideo { width: 100%; display: none; }
    #countdown { font-size: 24px; margin-top: 20px; }
  </style>
</head>
<body>
  <h1 id="channel"></h1>
  <img id="logo" />
  <div id="countdown"></div>
  <video id="liveVideo" controls autoplay></video>

  <script>
    fetch("https://script.google.com/macros/s/AKfycbz3SSqSKUJf7UnEEoBAhPpul08_816H5u3_mKP1fhSsP2pVQUmp5Bb_MFAnwiihysWNBg/exec?action=getData")
      .then(res => res.json())
      .then(data => {
        document.getElementById("channel").innerText = data.channel;
        document.getElementById("logo").src = data.logo;

        const matchTime = new Date(data.matchTime).getTime();
        const countdownEl = document.getElementById("countdown");
        const videoEl = document.getElementById("liveVideo");

        const interval = setInterval(() => {
          const now = new Date().getTime();
          const distance = matchTime - now;

          if (distance <= 0) {
            clearInterval(interval);
            countdownEl.innerText = "LIVE NOW";
            videoEl.style.display = "block";
            videoEl.src = data.link;
          } else {
            const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((distance % (1000 * 60)) / 1000);
            countdownEl.innerText = `Starts in: ${h}h ${m}m ${s}s`;
          }
        }, 1000);
      });
  </script>
</body>
</html>
