<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>Live Match - BDStreamHub</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      margin: 0;
      padding: 20px;
    }
    .match-container {
      background: #1c1c1c;
      border-radius: 10px;
      margin-bottom: 30px;
      padding: 20px;
      position: relative;
      box-shadow: 0 0 10px #000;
    }
    .match-title {
      font-size: 22px;
      font-weight: bold;
      text-align: center;
    }
    .logos {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
    }
    .team-logo {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
    }
    .player-wrapper {
      position: relative;
      margin-top: 15px;
    }
    video {
      width: 100%;
      border-radius: 10px;
    }
    .watermark {
      position: absolute;
      top: 10px;
      right: 10px;
      opacity: 0.7;
      z-index: 9;
      pointer-events: none;
    }
    .watermark img {
      width: 80px;
    }
    .sponsor {
      text-align: center;
      margin-top: 10px;
    }
    .sponsor img {
      max-width: 100%;
      border-radius: 10px;
    }
    .notice-box {
      background: #222;
      border-left: 5px solid #0ff;
      padding: 10px;
      margin: 15px 0;
      font-size: 14px;
    }
    .countdown {
      text-align: center;
      font-size: 18px;
      margin-top: 10px;
      color: #0f0;
    }
  </style>
</head>
<body>

  <h2>üì∫ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö ‡¶∏‡¶Æ‡ßÇ‡¶π</h2>
  <div id="matchesContainer"></div>

  <script>
    const matches = JSON.parse(localStorage.getItem("matches")) || [];

    function renderMatches() {
      const now = new Date().getTime();
      const container = document.getElementById("matchesContainer");
      container.innerHTML = "";

      matches.forEach((match, index) => {
        const matchTime = new Date(match.startTime).getTime();
        const isUpcomingOrLive = matchTime > now || now - matchTime < 6 * 60 * 60 * 1000;

        if (!isUpcomingOrLive) return;

        const div = document.createElement("div");
        div.className = "match-container";
        div.innerHTML = `
          <div class="match-title">${match.title}</div>
          <div class="logos">
            <img src="${match.teamLogo1}" class="team-logo">
            <img src="${match.teamLogo2}" class="team-logo">
          </div>

          <div class="player-wrapper">
            <video id="video${index}" controls poster="" autoplay muted>
              <source src="${match.streamURL}" type="application/x-mpegURL">
            </video>
            <div class="watermark"><img src="${match.logoURL}" alt="Watermark"></div>
          </div>

          <div class="notice-box">${match.notice}</div>
          <div class="countdown" id="countdown${index}">Loading countdown...</div>

          <div class="sponsor"><img src="${match.sponsorBanner}" alt="Sponsor"></div>
        `;
        container.appendChild(div);

        updateCountdown(match.startTime, `countdown${index}`);
        setInterval(() => updateCountdown(match.startTime, `countdown${index}`), 1000);
      });
    }

    function updateCountdown(startTime, elementId) {
      const countdownEl = document.getElementById(elementId);
      const matchTime = new Date(startTime).getTime();
      const now = new Date().getTime();
      const distance = matchTime - now;

      if (distance < 0) {
        countdownEl.innerHTML = "‚úÖ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶ö‡¶≤‡¶õ‡ßá...";
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      countdownEl.innerHTML = `‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶§‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø: ${days} ‡¶¶‡¶ø‡¶® ${hours} ‡¶ò‡¶£‡ßç‡¶ü‡¶æ ${minutes} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ${seconds} ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°`;
    }

    renderMatches();
  </script>
</body>
</html>
